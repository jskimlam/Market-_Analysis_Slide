<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Market Information Slide Â· LAM</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=Montserrat:wght@700;900&family=Noto+Sans+KR:wght@400;700;900&display=swap" rel="stylesheet">
<style>
:root {
  --orange: #FF8C00;
  --red:    #D93025;
  --black:  #000000;
  --white:  #FFFFFF;
  --bg:     #F0F0EE;
  --gray1:  #1A1A1A;
  --gray2:  #444444;
  --gray3:  #888888;
  --border: 2px solid var(--black);
  --shadow: 4px 4px 0px var(--black);
  --mono:   'DM Mono', monospace;
  --disp:   'Montserrat', sans-serif;
  --sans:   'Noto Sans KR', sans-serif;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; }
body {
  font-family: var(--sans);
  background: var(--bg);
  color: var(--gray1);
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
}

/* â”€â”€ í—¤ë”: ì¢Œ(ë°°ì§€) | ì¤‘(íƒ€ì´í‹€ í¬ê²Œ) | ìš°(ë“œë¡­ë‹¤ìš´) â”€â”€ */
.hdr {
  background: var(--white);
  border-bottom: var(--border);
  padding: 0 24px;
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 20px;
  position: sticky;
  top: 0;
  z-index: 100;
  flex-shrink: 0;
}

.hdr-left { display: flex; align-items: center; flex-shrink: 0; }

.brand-badge {
  background: var(--orange);
  border: var(--border);
  box-shadow: var(--shadow);
  font-family: var(--disp);
  font-size: 14px;
  font-weight: 900;
  padding: 5px 14px;
  letter-spacing: 1px;
}

/* íƒ€ì´í‹€ ê°€ìš´ë° í¬ê²Œ */
.hdr-center {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
}
.brand-title {
  font-family: var(--disp);
  font-size: 24px;
  font-weight: 900;
  letter-spacing: -1px;
  white-space: nowrap;
}
.brand-title span { color: var(--red); }

/* ì˜¤ë¥¸ìª½: ë‚ ì§œ + ë¶„ë¥˜ ë“œë¡­ë‹¤ìš´ */
.hdr-right {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-shrink: 0;
}

/* ë“œë¡­ë‹¤ìš´ ê³µí†µ */
.sel-wrap { position: relative; }
.sel-wrap select {
  appearance: none;
  -webkit-appearance: none;
  background: var(--white);
  border: var(--border);
  box-shadow: var(--shadow);
  font-family: var(--mono);
  font-size: 13px;
  font-weight: 700;
  padding: 7px 32px 7px 12px;
  cursor: pointer;
  outline: none;
  min-width: 120px;
  transition: box-shadow .1s;
}
.sel-wrap select:focus { box-shadow: 6px 6px 0px var(--black); }
.sel-wrap::after {
  content: 'â–¼';
  position: absolute;
  right: 10px; top: 50%;
  transform: translateY(-50%);
  font-size: 9px;
  pointer-events: none;
}

.security {
  font-family: var(--mono);
  font-size: 10px;
  font-weight: 700;
  color: var(--red);
  white-space: nowrap;
  border: 1px solid var(--red);
  padding: 3px 8px;
}

/* â”€â”€ ìŠ¬ë¼ì´ë“œ ì˜ì—­ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.slide-wrap {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: 16px 24px 12px;
  gap: 12px;
  min-height: 0;
}

.slide-frame {
  flex: 1;
  position: relative;
  background: var(--white);
  border: var(--border);
  box-shadow: var(--shadow);
  overflow: hidden;
  min-height: 0;
  touch-action: pan-y;
}

.slide-track {
  display: flex;
  height: 100%;
  transition: transform 0.35s cubic-bezier(.4,0,.2,1);
  will-change: transform;
}

.slide-item {
  flex-shrink: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--white);
  padding: 8px;
}
.slide-item img {
  max-width: 100%; max-height: 100%;
  object-fit: contain; display: block;
  user-select: none; -webkit-user-drag: none;
}

.empty-state {
  width: 100%; height: 100%;
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  gap: 12px; color: var(--gray3);
}
.empty-state .big { font-size: 48px; }
.empty-state .msg { font-family: var(--mono); font-size: 14px; }

/* â”€â”€ í•˜ë‹¨ ì»¨íŠ¸ë¡¤: í™”ì‚´í‘œë¥¼ ì´ë¯¸ì§€ ë°– í•˜ë‹¨ì— â”€â”€ */
.slide-footer {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 14px;
  flex-shrink: 0;
}

/* í™”ì‚´í‘œ ë²„íŠ¼ - í”„ë ˆì„ ë°– í•˜ë‹¨ ë°°ì¹˜ */
.arrow {
  background: var(--white);
  border: var(--border);
  box-shadow: var(--shadow);
  width: 40px; height: 40px;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer;
  font-size: 22px; font-weight: 900;
  transition: all .1s;
  user-select: none; flex-shrink: 0;
}
.arrow:hover  { background: var(--orange); }
.arrow:active { box-shadow: 2px 2px 0 var(--black); transform: translate(2px,2px); }
.arrow.hidden { opacity: 0; pointer-events: none; }

.dots { display: flex; gap: 8px; align-items: center; }
.dot {
  width: 10px; height: 10px;
  border: 2px solid var(--black);
  background: var(--white);
  cursor: pointer; transition: all .15s; flex-shrink: 0;
}
.dot.active { background: var(--black); width: 28px; }

.page-counter {
  font-family: var(--mono); font-size: 13px; font-weight: 700;
  min-width: 52px; text-align: center; color: var(--gray2);
}

.source { font-family: var(--mono); font-size: 10px; color: var(--gray3); font-style: italic; }

/* â”€â”€ í‘¸í„° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.ftr {
  border-top: var(--border); background: var(--white);
  padding: 10px 24px; display: flex;
  align-items: center; justify-content: space-between; flex-shrink: 0;
}
.ftr-left { font-family: var(--mono); font-size: 11px; font-weight: 700; }
.ftr-right { font-family: var(--mono); font-size: 10px; color: var(--gray3); }

/* â”€â”€ ë¡œë”© â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#loading {
  position: fixed; inset: 0; background: rgba(255,255,255,0.85);
  display: flex; align-items: center; justify-content: center;
  z-index: 9999; font-family: var(--mono); font-size: 14px; font-weight: 700; gap: 10px;
}
#loading.hidden { display: none; }
.spin {
  width: 20px; height: 20px;
  border: 3px solid var(--black); border-top-color: var(--orange);
  border-radius: 50%; animation: spin .7s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* â”€â”€ ëª¨ë°”ì¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media (max-width: 600px) {
  .hdr { height: auto; flex-wrap: wrap; padding: 10px 14px; gap: 8px; }
  .hdr-center { order: -1; width: 100%; }
  .brand-title { font-size: 16px; }
  .security { display: none; }
  .slide-wrap { padding: 10px 10px 8px; }
  .arrow { width: 34px; height: 34px; font-size: 18px; }
  .ftr { flex-direction: column; gap: 4px; text-align: center; }
}

/* â”€â”€ íƒœë¸”ë¦¿ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media (min-width: 601px) and (max-width: 1024px) {
  .hdr { height: auto; flex-wrap: wrap; padding: 10px 16px; }
  .brand-title { font-size: 18px; }
  .hdr-right { flex-wrap: wrap; }
}
</style>
</head>
<body>

<div id="loading"><div class="spin"></div>ë°ì´í„° ë¡œë”© ì¤‘...</div>

<header class="hdr">
  <div class="hdr-left">
    <div class="brand-badge">LAM</div>
  </div>
  <div class="hdr-center">
    <div class="brand-title">Market <span>Information</span> Slide</div>
  </div>
  <div class="hdr-right">
    <div class="sel-wrap">
      <select id="dateSelect" onchange="onDateChange(this.value)">
        <option value="">ë‚ ì§œ ì„ íƒ</option>
      </select>
    </div>
    <!-- ë¼ë²¨ íƒ­ â†’ ë“œë¡­ë‹¤ìš´ìœ¼ë¡œ ë³€ê²½ (íŒŒì¼ ì¢…ë¥˜ ë¬´í•œ ì¶”ê°€í•´ë„ UI ê¹¨ì§€ì§€ ì•ŠìŒ) -->
    <div class="sel-wrap">
      <select id="labelSelect" onchange="selectLabel(this.value)">
        <option value="">ë¶„ë¥˜ ì„ íƒ</option>
      </select>
    </div>
    <div class="security">ë³´ì•ˆ Â· ë³µì œë°°í¬ ê¸ˆì§€</div>
  </div>
</header>

<div class="slide-wrap">
  <div class="slide-frame" id="slideFrame">
    <div class="slide-track" id="slideTrack"></div>
    <div class="empty-state" id="emptyState">
      <div class="big">ğŸ“‚</div>
      <div class="msg">ë‚ ì§œì™€ ë¶„ë¥˜ë¥¼ ì„ íƒí•˜ì„¸ìš”</div>
    </div>
  </div>

  <!-- í™”ì‚´í‘œ ì´ë¯¸ì§€ ë°– í•˜ë‹¨ ë°°ì¹˜ -->
  <div class="slide-footer">
    <div class="arrow hidden" id="arrowLeft"  onclick="movePage(-1)">&#8249;</div>
    <div class="dots" id="dots"></div>
    <div class="page-counter" id="pageCounter"></div>
    <div class="arrow hidden" id="arrowRight" onclick="movePage(1)">&#8250;</div>
    <div class="source">Source: Platts / ICIS (AI Summarized)</div>
  </div>
</div>

<footer class="ftr">
  <div class="ftr-left">Created by JS Kim of LAM (ì²¨ë‹¨êµ¬ë§¤1íŒ€)</div>
  <div class="ftr-right">Â© 2026 Lotte Chemical Advanced Materials</div>
</footer>

<script>
let listData={}, curDate='', curLabel='', curPage=0, curImages=[];
let isDragging=false, startX=0, diffX=0;

async function init() {
  try {
    const res = await fetch('images/list.json?t=' + Date.now());
    if (!res.ok) throw new Error('list.json ë¡œë“œ ì‹¤íŒ¨');
    listData = await res.json();
    buildDateSelect();

    const dates = Object.keys(listData);
    if (dates.length > 0) {
      // â˜… ìˆ˜ì •: dates[0] â†’ ë§ˆì§€ë§‰ ìš”ì†Œ(ê°€ì¥ ìµœì‹  ë‚ ì§œ) ìë™ ì„ íƒ
      // GASê°€ list.jsonì„ ë‚ ì§œ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ìƒì„±í•œë‹¤ê³  ê°€ì •í•˜ë©´
      // ë°°ì—´ì˜ ë§ˆì§€ë§‰ í•­ëª©ì´ ê°€ì¥ ìµœì‹  ë‚ ì§œì„
      const latestDate = dates[dates.length - 1];
      onDateChange(latestDate);
      document.getElementById('dateSelect').value = latestDate;
    }
  } catch(e) {
    console.error(e);
    showEmpty('list.jsonì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
  } finally {
    document.getElementById('loading').classList.add('hidden');
  }
}

function buildDateSelect() {
  const sel = document.getElementById('dateSelect');
  sel.innerHTML = '<option value="">ë‚ ì§œ ì„ íƒ</option>';

  // â˜… ìˆ˜ì •: ë‚ ì§œ ëª©ë¡ì„ reverse()í•´ì„œ ìµœì‹  ë‚ ì§œê°€ ë“œë¡­ë‹¤ìš´ ìƒë‹¨ì— í‘œì‹œë˜ë„ë¡
  // ì›ë³¸ listData í‚¤ ìˆœì„œëŠ” ìœ ì§€í•˜ê³  í‘œì‹œìš© ë°°ì—´ë§Œ ë’¤ì§‘ìŒ
  const dates = Object.keys(listData).slice().reverse();
  dates.forEach(d => {
    const o = document.createElement('option');
    o.value = d;
    o.textContent = formatDate(d);
    sel.appendChild(o);
  });
}

function onDateChange(date) {
  if (!date || !listData[date]) return;
  curDate = date;
  buildLabelSelect(Object.keys(listData[date]));
  const labels = Object.keys(listData[date]);
  if (labels.length > 0) {
    document.getElementById('labelSelect').value = labels[0];
    selectLabel(labels[0]);
  }
}

// ë¼ë²¨ ë“œë¡­ë‹¤ìš´: íŒŒì¼ ì´ë¦„ ëª‡ ê°œë“  UI ê¹¨ì§€ì§€ ì•ŠìŒ
function buildLabelSelect(labels) {
  const sel = document.getElementById('labelSelect');
  sel.innerHTML = '<option value="">ë¶„ë¥˜ ì„ íƒ</option>';
  labels.forEach(l => {
    const o = document.createElement('option');
    o.value = l;
    o.textContent = l;
    sel.appendChild(o);
  });
}

function selectLabel(label) {
  if (!label) return;
  curLabel = label;
  curPage = 0;
  curImages = (listData[curDate] && listData[curDate][label]) || [];
  renderSlides();
}

function renderSlides() {
  const track = document.getElementById('slideTrack');
  const empty = document.getElementById('emptyState');
  track.innerHTML = '';
  if (curImages.length === 0) {
    track.style.display = 'none';
    empty.style.display = 'flex';
    document.getElementById('dots').innerHTML = '';
    document.getElementById('pageCounter').textContent = '';
    updateArrows();
    return;
  }
  track.style.display = 'flex';
  empty.style.display = 'none';
  curImages.forEach((fn, idx) => {
    const item = document.createElement('div');
    item.className = 'slide-item';
    const img = document.createElement('img');
    img.src = `images/archive/${fn}`;
    img.alt = `ìŠ¬ë¼ì´ë“œ ${idx+1}`;
    img.loading = idx === 0 ? 'eager' : 'lazy';
    item.appendChild(img);
    track.appendChild(item);
  });
  goToPage(0, false);
  buildDots();
}

function movePage(delta) {
  if (curImages.length === 0) return;
  goToPage((curPage + delta + curImages.length) % curImages.length, true);
}

function goToPage(idx, animate) {
  curPage = idx;
  const track = document.getElementById('slideTrack');
  track.style.transition = animate ? 'transform 0.35s cubic-bezier(.4,0,.2,1)' : 'none';
  track.style.transform  = `translateX(-${idx * 100}%)`;
  updateArrows();
  updateDots();
  updateCounter();
}

function updateArrows() {
  // ìˆœí™˜ì´ë¯€ë¡œ ì´ë¯¸ì§€ ìˆìœ¼ë©´ í•­ìƒ í‘œì‹œ
  document.getElementById('arrowLeft').classList.toggle('hidden',  curImages.length === 0);
  document.getElementById('arrowRight').classList.toggle('hidden', curImages.length === 0);
}

function buildDots() {
  const c = document.getElementById('dots');
  c.innerHTML = '';
  curImages.forEach((_, i) => {
    const d = document.createElement('div');
    d.className = 'dot' + (i === curPage ? ' active' : '');
    d.onclick = () => goToPage(i, true);
    c.appendChild(d);
  });
}

function updateDots() {
  document.querySelectorAll('.dot').forEach((d,i) => d.classList.toggle('active', i === curPage));
}

function updateCounter() {
  document.getElementById('pageCounter').textContent =
    curImages.length > 0 ? `${curPage+1} / ${curImages.length}` : '';
}

function showEmpty(msg) {
  const e = document.getElementById('emptyState');
  e.querySelector('.msg').textContent = msg;
  e.style.display = 'flex';
  document.getElementById('slideTrack').style.display = 'none';
}

function formatDate(d) {
  // YYMMDD í˜•ì‹ â†’ 20YY/MM/DD ë¡œ ë³€í™˜
  return d.length === 6
    ? `20${d.slice(0,2)}/${d.slice(2,4)}/${d.slice(4,6)}`
    : d;
}

// â”€â”€ í„°ì¹˜ ìŠ¤ì™€ì´í”„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const frame = document.getElementById('slideFrame');
frame.addEventListener('touchstart', e => {
  startX = e.touches[0].clientX; diffX = 0; isDragging = true;
}, {passive:true});
frame.addEventListener('touchmove', e => {
  if (!isDragging) return;
  diffX = e.touches[0].clientX - startX;
  const t = document.getElementById('slideTrack');
  t.style.transition = 'none';
  t.style.transform = `translateX(calc(-${curPage*100}% + ${diffX}px))`;
}, {passive:true});
frame.addEventListener('touchend', () => {
  if (!isDragging) return;
  isDragging = false;
  const thr = frame.offsetWidth * 0.2;
  if (diffX < -thr) movePage(1);
  else if (diffX > thr) movePage(-1);
  else goToPage(curPage, true);
});

// â”€â”€ ë§ˆìš°ìŠ¤ ë“œë˜ê·¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
frame.addEventListener('mousedown', e => {
  startX = e.clientX; diffX = 0; isDragging = true; frame.style.cursor = 'grabbing';
});
document.addEventListener('mousemove', e => {
  if (!isDragging) return;
  diffX = e.clientX - startX;
  const t = document.getElementById('slideTrack');
  t.style.transition = 'none';
  t.style.transform = `translateX(calc(-${curPage*100}% + ${diffX}px))`;
});
document.addEventListener('mouseup', () => {
  if (!isDragging) return;
  isDragging = false;
  frame.style.cursor = '';
  const thr = frame.offsetWidth * 0.15;
  if (diffX < -thr) movePage(1);
  else if (diffX > thr) movePage(-1);
  else goToPage(curPage, true);
});

// â”€â”€ í‚¤ë³´ë“œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.addEventListener('keydown', e => {
  if (e.key === 'ArrowLeft')  movePage(-1);
  if (e.key === 'ArrowRight') movePage(1);
});

init();
</script>
</body>
</html>
