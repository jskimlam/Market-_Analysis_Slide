<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Daily Market Briefing Â· LAM</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=Montserrat:wght@700;900&family=Noto+Sans+KR:wght@400;700;900&display=swap" rel="stylesheet">
<style>
/* â”€â”€ CSS ë³€ìˆ˜ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
:root {
  --orange: #FF8C00;
  --red:    #D93025;
  --black:  #000000;
  --white:  #FFFFFF;
  --bg:     #F0F0EE;
  --gray1:  #1A1A1A;
  --gray2:  #444444;
  --gray3:  #888888;
  --gray4:  #CCCCCC;
  --border: 2px solid var(--black);
  --shadow: 4px 4px 0px var(--black);
  --mono:   'DM Mono', monospace;
  --disp:   'Montserrat', sans-serif;
  --sans:   'Noto Sans KR', sans-serif;
}

/* â”€â”€ ë¦¬ì…‹ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; }
body {
  font-family: var(--sans);
  background: var(--bg);
  color: var(--gray1);
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
}

/* â”€â”€ í—¤ë” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.hdr {
  background: var(--white);
  border-bottom: var(--border);
  padding: 0 24px;
  height: 56px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  position: sticky;
  top: 0;
  z-index: 100;
  flex-shrink: 0;
}

.hdr-brand {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-shrink: 0;
}

.brand-badge {
  background: var(--orange);
  border: var(--border);
  box-shadow: var(--shadow);
  font-family: var(--disp);
  font-size: 13px;
  font-weight: 900;
  padding: 4px 10px;
  letter-spacing: 1px;
}

.brand-title {
  font-family: var(--disp);
  font-size: 15px;
  font-weight: 900;
  letter-spacing: -0.5px;
  white-space: nowrap;
}

.brand-title span { color: var(--red); }

/* â”€â”€ ì»¨íŠ¸ë¡¤ ì˜ì—­ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.controls {
  display: flex;
  align-items: center;
  gap: 10px;
  flex: 1;
  justify-content: center;
}

/* ë‚ ì§œ ë“œë¡­ë‹¤ìš´ */
.sel-wrap { position: relative; }
.sel-wrap select {
  appearance: none;
  -webkit-appearance: none;
  background: var(--white);
  border: var(--border);
  box-shadow: var(--shadow);
  font-family: var(--mono);
  font-size: 13px;
  font-weight: 700;
  padding: 7px 36px 7px 14px;
  cursor: pointer;
  outline: none;
  min-width: 130px;
  transition: box-shadow .1s;
}
.sel-wrap select:focus { box-shadow: 6px 6px 0px var(--black); }
.sel-wrap::after {
  content: 'â–¼';
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 9px;
  pointer-events: none;
}

/* ë¼ë²¨ íƒ­ ë²„íŠ¼ë“¤ */
.label-tabs {
  display: flex;
  gap: 6px;
  align-items: center;
}
.label-btn {
  font-family: var(--mono);
  font-size: 12px;
  font-weight: 700;
  padding: 6px 14px;
  border: var(--border);
  background: var(--white);
  cursor: pointer;
  transition: all .1s;
  white-space: nowrap;
}
.label-btn:hover { background: var(--bg); }
.label-btn.active {
  background: var(--black);
  color: var(--white);
  box-shadow: var(--shadow);
}

/* ë³´ì•ˆ ë¬¸êµ¬ */
.security {
  font-family: var(--mono);
  font-size: 10px;
  font-weight: 700;
  color: var(--red);
  white-space: nowrap;
  flex-shrink: 0;
  border: 1px solid var(--red);
  padding: 3px 8px;
  letter-spacing: 0.3px;
}

/* â”€â”€ ìŠ¬ë¼ì´ë“œ ë©”ì¸ ì˜ì—­ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.slide-wrap {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: 20px 24px 16px;
  gap: 14px;
  min-height: 0;
}

/* ìŠ¬ë¼ì´ë“œ í”„ë ˆì„ */
.slide-frame {
  flex: 1;
  position: relative;
  background: var(--white);
  border: var(--border);
  box-shadow: var(--shadow);
  overflow: hidden;
  min-height: 0;
  /* í„°ì¹˜ ìŠ¤ì™€ì´í”„ ê°ì§€ ì˜ì—­ */
  touch-action: pan-y;
}

/* ìŠ¬ë¼ì´ë“œ íŠ¸ë™ (ì´ë¯¸ì§€ë“¤ì„ ê°€ë¡œë¡œ ë‚˜ì—´) */
.slide-track {
  display: flex;
  height: 100%;
  transition: transform 0.35s cubic-bezier(.4,0,.2,1);
  will-change: transform;
}

/* ê°œë³„ ìŠ¬ë¼ì´ë“œ */
.slide-item {
  flex-shrink: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--white);
  padding: 8px;
}

.slide-item img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  display: block;
  user-select: none;
  -webkit-user-drag: none;
}

/* ì¢Œìš° í™”ì‚´í‘œ ë²„íŠ¼ */
.arrow {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: var(--white);
  border: var(--border);
  box-shadow: var(--shadow);
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 20px;
  font-weight: 900;
  z-index: 10;
  transition: all .1s;
  user-select: none;
}
.arrow:hover { background: var(--orange); }
.arrow:active { box-shadow: 2px 2px 0px var(--black); transform: translateY(calc(-50% + 2px)) translateX(2px); }
.arrow.left  { left: 12px; }
.arrow.right { right: 12px; }
.arrow.hidden { opacity: 0; pointer-events: none; }

/* í˜ì´ì§€ ì—†ì„ ë•Œ ë¹ˆ í™”ë©´ */
.empty-state {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
  color: var(--gray3);
}
.empty-state .big { font-size: 48px; }
.empty-state .msg { font-family: var(--mono); font-size: 14px; }

/* â”€â”€ í•˜ë‹¨ ì»¨íŠ¸ë¡¤ ë°” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.slide-footer {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  flex-shrink: 0;
}

/* Dot ì¸ë””ì¼€ì´í„° */
.dots {
  display: flex;
  gap: 8px;
  align-items: center;
}
.dot {
  width: 10px;
  height: 10px;
  border: 2px solid var(--black);
  background: var(--white);
  cursor: pointer;
  transition: all .15s;
}
.dot.active {
  background: var(--black);
  width: 28px;
}

/* í˜ì´ì§€ ì¹´ìš´í„° */
.page-counter {
  font-family: var(--mono);
  font-size: 13px;
  font-weight: 700;
  min-width: 60px;
  text-align: center;
  color: var(--gray2);
}

/* ì†ŒìŠ¤ í‘œê¸° */
.source {
  font-family: var(--mono);
  font-size: 10px;
  color: var(--gray3);
  font-style: italic;
}

/* â”€â”€ í‘¸í„° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.ftr {
  border-top: var(--border);
  background: var(--white);
  padding: 10px 24px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-shrink: 0;
}
.ftr-left {
  font-family: var(--mono);
  font-size: 11px;
  font-weight: 700;
}
.ftr-right {
  font-family: var(--mono);
  font-size: 10px;
  color: var(--gray3);
}

/* â”€â”€ ë¡œë”© ì˜¤ë²„ë ˆì´ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#loading {
  position: fixed;
  inset: 0;
  background: rgba(255,255,255,0.85);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  font-family: var(--mono);
  font-size: 14px;
  font-weight: 700;
  gap: 10px;
}
#loading.hidden { display: none; }
.spin {
  width: 20px; height: 20px;
  border: 3px solid var(--black);
  border-top-color: var(--orange);
  border-radius: 50%;
  animation: spin .7s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* â”€â”€ ë°˜ì‘í˜•: ëª¨ë°”ì¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media (max-width: 600px) {
  .hdr {
    height: auto;
    flex-wrap: wrap;
    padding: 12px 14px;
    gap: 10px;
  }
  .brand-title { font-size: 13px; }
  .security { display: none; }
  .controls {
    width: 100%;
    flex-wrap: wrap;
    justify-content: flex-start;
    gap: 8px;
  }
  .label-tabs { flex-wrap: wrap; }
  .slide-wrap { padding: 12px 12px 10px; }
  .arrow { width: 36px; height: 36px; font-size: 16px; }
  .arrow.left  { left: 6px; }
  .arrow.right { right: 6px; }
  .ftr { flex-direction: column; gap: 4px; text-align: center; }
}

/* â”€â”€ ë°˜ì‘í˜•: íƒœë¸”ë¦¿ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media (min-width: 601px) and (max-width: 1024px) {
  .hdr { height: auto; flex-wrap: wrap; padding: 10px 16px; }
  .controls { width: 100%; }
}
</style>
</head>
<body>

<!-- ë¡œë”© ì˜¤ë²„ë ˆì´ -->
<div id="loading"><div class="spin"></div>ë°ì´í„° ë¡œë”© ì¤‘...</div>

<!-- â”€â”€ í—¤ë” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<header class="hdr">
  <div class="hdr-brand">
    <div class="brand-badge">LAM</div>
    <div class="brand-title">Daily <span>Market</span> Briefing</div>
  </div>

  <div class="controls">
    <!-- ë‚ ì§œ ë“œë¡­ë‹¤ìš´ -->
    <div class="sel-wrap">
      <select id="dateSelect" onchange="onDateChange(this.value)">
        <option value="">ë‚ ì§œ ì„ íƒ</option>
      </select>
    </div>

    <!-- ë¼ë²¨(ì´ë¦„) íƒ­ -->
    <div class="label-tabs" id="labelTabs"></div>
  </div>

  <div class="security">ì‚¬ë‚´ ë³´ì•ˆ Â· ë³µì œë°°í¬ ê¸ˆì§€</div>
</header>

<!-- â”€â”€ ìŠ¬ë¼ì´ë“œ ì˜ì—­ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="slide-wrap">

  <div class="slide-frame" id="slideFrame">
    <!-- ìŠ¬ë¼ì´ë“œ íŠ¸ë™ (JSë¡œ ì±„ì›Œì§) -->
    <div class="slide-track" id="slideTrack"></div>

    <!-- ë¹ˆ ìƒíƒœ -->
    <div class="empty-state" id="emptyState">
      <div class="big">ğŸ“‚</div>
      <div class="msg">ë‚ ì§œì™€ í’ˆëª©ì„ ì„ íƒí•˜ì„¸ìš”</div>
    </div>

    <!-- ì¢Œìš° í™”ì‚´í‘œ -->
    <div class="arrow left hidden" id="arrowLeft" onclick="movePage(-1)">&#8249;</div>
    <div class="arrow right hidden" id="arrowRight" onclick="movePage(1)">&#8250;</div>
  </div>

  <!-- í•˜ë‹¨ ì¸ë””ì¼€ì´í„° -->
  <div class="slide-footer">
    <div class="dots" id="dots"></div>
    <div class="page-counter" id="pageCounter"></div>
    <div class="source">Source: Platts / ICIS (AI Summarized)</div>
  </div>

</div>

<!-- â”€â”€ í‘¸í„° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<footer class="ftr">
  <div class="ftr-left">Created by JS Kim of LAM (ì²¨ë‹¨êµ¬ë§¤1íŒ€)</div>
  <div class="ftr-right">Â© 2026 Lotte Chemical Advanced Materials</div>
</footer>

<!-- â”€â”€ JavaScript â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<script>
// â”€â”€ ìƒíƒœ ë³€ìˆ˜ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let listData   = {};   // { "260206": { "SM": ["íŒŒì¼1","íŒŒì¼2"], ... }, ... }
let curDate    = '';   // í˜„ì¬ ì„ íƒëœ ë‚ ì§œ
let curLabel   = '';   // í˜„ì¬ ì„ íƒëœ ë¼ë²¨
let curPage    = 0;    // í˜„ì¬ ìŠ¬ë¼ì´ë“œ ì¸ë±ìŠ¤ (0-based)
let curImages  = [];   // í˜„ì¬ í‘œì‹œ ì¤‘ì¸ ì´ë¯¸ì§€ íŒŒì¼ëª… ë°°ì—´
let isDragging = false;
let startX     = 0;
let diffX      = 0;

// â”€â”€ ì´ˆê¸°í™”: list.json ë¡œë“œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function init() {
  try {
    const res  = await fetch('images/list.json?t=' + Date.now());
    if (!res.ok) throw new Error('list.json ë¡œë“œ ì‹¤íŒ¨');
    listData = await res.json();
    buildDateSelect();
    // ê°€ì¥ ìµœì‹  ë‚ ì§œ ìë™ ì„ íƒ
    const dates = Object.keys(listData);
    if (dates.length > 0) {
      onDateChange(dates[0]);
      document.getElementById('dateSelect').value = dates[0];
    }
  } catch (e) {
    console.error(e);
    showEmpty('list.jsonì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
  } finally {
    document.getElementById('loading').classList.add('hidden');
  }
}

// â”€â”€ ë‚ ì§œ ë“œë¡­ë‹¤ìš´ ë¹Œë“œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function buildDateSelect() {
  const sel = document.getElementById('dateSelect');
  // ê¸°ì¡´ ì˜µì…˜ ì´ˆê¸°í™” (ì²« ë²ˆì§¸ placeholder ì œì™¸)
  sel.innerHTML = '<option value="">ë‚ ì§œ ì„ íƒ</option>';
  Object.keys(listData).forEach(date => {
    const opt = document.createElement('option');
    opt.value = date;
    // YYMMDD â†’ YY/MM/DD í¬ë§·ìœ¼ë¡œ ë³´ê¸° ì¢‹ê²Œ
    opt.textContent = formatDate(date);
    sel.appendChild(opt);
  });
}

// â”€â”€ ë‚ ì§œ ì„ íƒ ì´ë²¤íŠ¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function onDateChange(date) {
  if (!date || !listData[date]) return;
  curDate = date;
  // í•´ë‹¹ ë‚ ì§œì˜ ë¼ë²¨ ëª©ë¡ìœ¼ë¡œ íƒ­ ë¹Œë“œ
  buildLabelTabs(Object.keys(listData[date]));
  // ì²« ë²ˆì§¸ ë¼ë²¨ ìë™ ì„ íƒ
  const labels = Object.keys(listData[date]);
  if (labels.length > 0) selectLabel(labels[0]);
}

// â”€â”€ ë¼ë²¨ íƒ­ ë¹Œë“œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function buildLabelTabs(labels) {
  const container = document.getElementById('labelTabs');
  container.innerHTML = '';
  labels.forEach(label => {
    const btn = document.createElement('button');
    btn.className = 'label-btn';
    btn.textContent = label;
    btn.onclick = () => selectLabel(label);
    container.appendChild(btn);
  });
}

// â”€â”€ ë¼ë²¨ ì„ íƒ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function selectLabel(label) {
  curLabel = label;
  curPage  = 0;

  // íƒ­ í™œì„±í™” í‘œì‹œ
  document.querySelectorAll('.label-btn').forEach(btn => {
    btn.classList.toggle('active', btn.textContent === label);
  });

  // ì´ë¯¸ì§€ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
  curImages = (listData[curDate] && listData[curDate][label]) || [];
  renderSlides();
}

// â”€â”€ ìŠ¬ë¼ì´ë“œ ë Œë” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderSlides() {
  const track   = document.getElementById('slideTrack');
  const empty   = document.getElementById('emptyState');
  const counter = document.getElementById('pageCounter');

  track.innerHTML = '';

  if (curImages.length === 0) {
    track.style.display = 'none';
    empty.style.display = 'flex';
    document.getElementById('dots').innerHTML = '';
    counter.textContent = '';
    updateArrows();
    return;
  }

  // íŠ¸ë™ í‘œì‹œ
  track.style.display = 'flex';
  empty.style.display = 'none';

  // ìŠ¬ë¼ì´ë“œ ì•„ì´í…œ ìƒì„±
  curImages.forEach((filename, idx) => {
    const item = document.createElement('div');
    item.className = 'slide-item';
    const img = document.createElement('img');
    img.src = `images/archive/${filename}`;
    img.alt = `ìŠ¬ë¼ì´ë“œ ${idx + 1}`;
    img.loading = idx === 0 ? 'eager' : 'lazy';  // ì²« ì¥ì€ ì¦‰ì‹œ ë¡œë“œ
    item.appendChild(img);
    track.appendChild(item);
  });

  goToPage(0, false);  // ì²« ì¥ìœ¼ë¡œ ì´ë™ (ì• ë‹ˆë©”ì´ì…˜ ì—†ì´)
  buildDots();
}

// â”€â”€ í˜ì´ì§€ ì´ë™ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function movePage(delta) {
  const next = curPage + delta;
  if (next < 0 || next >= curImages.length) return;
  goToPage(next, true);
}

function goToPage(idx, animate) {
  curPage = idx;
  const track = document.getElementById('slideTrack');

  // ì• ë‹ˆë©”ì´ì…˜ ì—¬ë¶€
  track.style.transition = animate
    ? 'transform 0.35s cubic-bezier(.4,0,.2,1)'
    : 'none';

  // ìŠ¬ë¼ì´ë“œ ì´ë™
  track.style.transform = `translateX(-${idx * 100}%)`;

  updateArrows();
  updateDots();
  updateCounter();
}

// â”€â”€ í™”ì‚´í‘œ í‘œì‹œ ì—…ë°ì´íŠ¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function updateArrows() {
  const left  = document.getElementById('arrowLeft');
  const right = document.getElementById('arrowRight');
  left.classList.toggle('hidden',  curPage === 0 || curImages.length === 0);
  right.classList.toggle('hidden', curPage >= curImages.length - 1 || curImages.length === 0);
}

// â”€â”€ Dot ì¸ë””ì¼€ì´í„° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function buildDots() {
  const container = document.getElementById('dots');
  container.innerHTML = '';
  curImages.forEach((_, idx) => {
    const dot = document.createElement('div');
    dot.className = 'dot' + (idx === curPage ? ' active' : '');
    dot.onclick = () => goToPage(idx, true);
    container.appendChild(dot);
  });
}

function updateDots() {
  document.querySelectorAll('.dot').forEach((dot, idx) => {
    dot.classList.toggle('active', idx === curPage);
  });
}

// â”€â”€ í˜ì´ì§€ ì¹´ìš´í„° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function updateCounter() {
  const el = document.getElementById('pageCounter');
  el.textContent = curImages.length > 0
    ? `${curPage + 1} / ${curImages.length}`
    : '';
}

// â”€â”€ ë¹ˆ ìƒíƒœ ë©”ì‹œì§€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showEmpty(msg) {
  const empty = document.getElementById('emptyState');
  empty.querySelector('.msg').textContent = msg;
  empty.style.display = 'flex';
  document.getElementById('slideTrack').style.display = 'none';
}

// â”€â”€ ë‚ ì§œ í¬ë§· (260206 â†’ 26/02/06) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function formatDate(d) {
  if (d.length === 6) return `20${d.slice(0,2)}/${d.slice(2,4)}/${d.slice(4,6)}`;
  return d;
}

// â”€â”€ í„°ì¹˜ ìŠ¤ì™€ì´í”„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const frame = document.getElementById('slideFrame');

frame.addEventListener('touchstart', e => {
  startX = e.touches[0].clientX;
  diffX  = 0;
  isDragging = true;
}, { passive: true });

frame.addEventListener('touchmove', e => {
  if (!isDragging) return;
  diffX = e.touches[0].clientX - startX;
  // í˜„ì¬ ìœ„ì¹˜ì—ì„œ ë“œë˜ê·¸ ë¯¸ë¦¬ë³´ê¸°
  const track = document.getElementById('slideTrack');
  track.style.transition = 'none';
  track.style.transform = `translateX(calc(-${curPage * 100}% + ${diffX}px))`;
}, { passive: true });

frame.addEventListener('touchend', () => {
  if (!isDragging) return;
  isDragging = false;
  const threshold = frame.offsetWidth * 0.2;  // 20% ì´ìƒ ë“œë˜ê·¸ ì‹œ í˜ì´ì§€ ì „í™˜
  if (diffX < -threshold) movePage(1);        // ì™¼ìª½ ìŠ¤ì™€ì´í”„ â†’ ë‹¤ìŒ
  else if (diffX > threshold) movePage(-1);   // ì˜¤ë¥¸ìª½ ìŠ¤ì™€ì´í”„ â†’ ì´ì „
  else goToPage(curPage, true);               // ë³µê·€
});

// â”€â”€ ë§ˆìš°ìŠ¤ ë“œë˜ê·¸ (PC) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
frame.addEventListener('mousedown', e => {
  startX = e.clientX;
  diffX  = 0;
  isDragging = true;
  frame.style.cursor = 'grabbing';
});

document.addEventListener('mousemove', e => {
  if (!isDragging) return;
  diffX = e.clientX - startX;
  const track = document.getElementById('slideTrack');
  track.style.transition = 'none';
  track.style.transform = `translateX(calc(-${curPage * 100}% + ${diffX}px))`;
});

document.addEventListener('mouseup', () => {
  if (!isDragging) return;
  isDragging = false;
  frame.style.cursor = '';
  const threshold = frame.offsetWidth * 0.15;
  if (diffX < -threshold) movePage(1);
  else if (diffX > threshold) movePage(-1);
  else goToPage(curPage, true);
});

// â”€â”€ í‚¤ë³´ë“œ â† â†’ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.addEventListener('keydown', e => {
  if (e.key === 'ArrowLeft')  movePage(-1);
  if (e.key === 'ArrowRight') movePage(1);
});

// â”€â”€ ì‹œì‘ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
init();
</script>
</body>
</html>
